# 进程  
1.定义：进程是程序在某个数据集上一次动态执行的过程。进程也是操作系统进行资源分配（cpu时间片资源，存储器等等）和调度的基本单位。由pcb，数据段，程序段组成。  
2.阶段：主要是三个，`运行，就绪，阻塞`。
- 就绪-运行：获得了处理器时间片资源。
- 运行-就绪：被更优先级的进程给抢占了或者是当前时间片用完了。
- 运行-阻塞：比如等待速度较慢的io事件。  

3.进程的切换（要依靠内核来完成）  
- 保存当前的上下文，比如程序计数器和寄存器。
- 更新pcb信息
- 将进程的pcb（对进程的操作实际上都是对pcb的操作）移动到相应的等待或者阻塞队列
- 选择另一个进程，并获取起pcb，更新内存管理的数据结构，恢复处理机上下文。  

4.进程间的通讯，有三种方式：
- 共享存储区域：有基于低级的数据结构的也有基于存储块的，其中write/read要做同步操作
- 消息传递：1.直接消息传递，直接将特定格式的消息发送给接收进程。2.间接消息传递，将消息发送给一个中间体，由这个中间体发送给接收进程，比如邮件系统。
- 管道通讯：是消息传递的一个特殊方式，通过一个pipe文件，发送进程向该文件写数据，接收进程从该文件读取数据。其中要做互斥，同步操作。且管道的数据都是一次性读取的。  

# 线程  
1.定义：一个进程有若干线程，线程可以认为是进程实际执行的单位，也是处理器处理的基本单位。在引入了线程过后，进程实际上只是操作系统资源分配的基本单位了，而具体的调度是由线程来完成的。  

2.线程切换和进程切换的一个比较：
进程切换需要保存当前进程的信息的保存以及新进程cpu环境的设置，开销很大，而线程切换只要保存和设置少量寄存器的内容，开销很小。通俗理解就是进程切换必然导致线程切换，一个进程对应多个线程，同时对多个线程
保存上下文和当前进程的信息开销肯定比单纯切换一个线程来的大得多。  


# 引申  
1.线程安全：同一条线程在对同一段程序，在单线程环境和多线程环境下执行结果都是满足预期的**注意这里说的不一定是一样**，再直白一点就是在多线程环境下执行程序的时候必须保证`共享数据`的准确性。比如A和B线程
都需要对一个共享变量C做处理，每个线程在处理完后都要对比一下C这个值，如果A线程获取C过后，不做同步处理，B线程也获取了C，同时修改了C的值，那么A线程在最后验证阶段将会得到预期之外的结果，可能导致线程异常。


2.线程的通讯方式（这里可以结合并发处理一起看）：
- 通过violate关键字或者synchronize关键字。
- 通过object对象的wait和notify方法
- CountDownLatch
- 使用 ReentrantLock 结合 Condition  

3.多线程的优缺点：能充分发挥多核cpu的能力，但是同时编码的过程中也要做同步操作，保证各个线程之间的执行会得到一个预期争取的结果。  

4.线程优先级：这个可以使我们对线程的执行过程有一个更加准确的控制，比如相应键盘或者鼠标的事件肯定是最高优先级，所以高优先级能打断低优先级线程的执行。  

# 进程调度（实际上应该是线程的调度）  
高响应比公式：响应比=（等待时间+要求服务时间）/要求服务时间好处是：
- 执行时间很长的任务，随着等待时间的增加响应比也会增加，克服了饥饿。
- 等待时间相同，服务时间越短就先执行，短作业优先。
- 要求服务时间相同，等待时间越长越先执行，可以理解为成了先来先服务了。
![调度知识图谱](https://github.com/781303842/Mainstudy/blob/master/ALLIMG/%E7%BA%BF%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.png)


